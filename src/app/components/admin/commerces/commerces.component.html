<div class="contenedor">
  <header>
    <img
      src="assets/01-logo-color.svg"
      alt="TodosMasCerca"
      style="width: 150px; height: 53px;"
    />
    <ul class="main-nav">
      <li class="nav-item">
        <a
          class="nav-link cursorPnt"
          style="font-size: 25px; margin-left: 5px;"
          (click)="onLogout()"
          >Log Out</a
        >
      </li>
    </ul>
  </header>
</div>
<div class="inlineAt">
  <h6 class="">
    Fecha:<span style="font-weight: normal;"> {{ fecha | date }} </span>
  </h6>
  <h6 class="">
    Hora:
    <span style="font-weight: normal;"> {{ fecha | date: "HH:mm:ss" }}</span>
  </h6>
</div>
<div style="width: 90%; margin: auto;">
  <div style="display: inline-flex;">
    <h4 class="color3" style="justify-self: left;">Administrar Comercios:</h4>
   <!--  <div style="justify-self: flex-end;">
      <input type="text"/>
    </div> -->
  </div>
  <div class="category-container">
    <button
      class="btn-next"
      [ngClass]="{ blue: allowed, grey: !allowed }"
      (click)="onSetAllowed(true)"
    >
      Cargados
    </button>
    <button
      class="btn-next"
      [ngClass]="{ blue: !allowed, grey: allowed }"
      (click)="onSetAllowed(false)"
    >
      En Revisión
    </button>
  </div>
  <div class="category-container">
    <label class="color3">Seleccione Categoría</label>
    <select (change)="onSetCategory($event.target.value)">
      <option value="all">Todos</option>
      <option
        [ngValue]="category"
        *ngFor="let category of commerceCategories"
        >{{ category }}</option
      >
    </select>
  </div>
  <table>
    <tr>
      <th style="text-align: center;">
        Seleccionar Todos
        <input
          type="checkbox"
          (change)="onSelectAll($event.target.checked)"
          [checked]="allSelected"
        />
      </th>
      <th style="text-align: center;" *ngFor="let title of titlesList">
        {{ title }}
      </th>
    </tr>
    <tr *ngFor="let commerce of commerceList; let i = index">
      <td>
        <input
          type="checkbox"
          [value]="i"
          (change)="onCheckCommerce($event.target)"
          [checked]="isCommerceSelectedList[i]"
        />
      </td>
      <td>{{ commerce.idAux }}</td>
      <td>{{ commerce.category.commerceCategory }}</td>
      <td>{{ commerce.commerceName }}</td>
      <td>{{ commerce.city }}</td>
      <td>{{ commerce.address }}</td>
      <td>{{ commerce.hourOpen }}</td>
      <td>{{ commerce.hourClose }}</td>
      <td>{{ commerce.ownerName }}</td>
      <td>{{ commerce.ownerLastName }}</td>
      <td>{{ commerce.phone }}</td>
      <td>{{ commerce.ownerEmail }}</td>
      <td><img class="table-image" [src]="commerce.commercePhoto" alt="" /></td>
      <td>{{ parseDates(commerce?.createdAt) | date: "shortDate" }}</td>
    </tr>
  </table>

  <nav aria-label="Page navigation example">
    <ul class="pagination">
      <li
        class="page-item"
        *ngIf="numeroPaginas > 1"
        (click)="navigateToPage('atras')"
      >
        <a class="page-link">Anterior</a>
      </li>
      <li
        class="page-item"
        *ngFor="let pagina of listaNumeroPaginas; let i = index"
        (click)="getNextServicios(pagina)"
      >
        <a
          class="page-link"
          [ngClass]="{
            'a-selected': listaPaginasSelected[i],
            'page-link': !listaPaginasSelected[i]
          }"
          >{{ pagina }}</a
        >
      </li>
      <li
        class="page-item"
        *ngIf="numeroPaginas > 1 && currentPage !== listaNumeroPaginas.length"
        (click)="navigateToPage('adelante')"
      >
        <a class="page-link">Siguiente</a>
      </li>
    </ul>
  </nav>
  <div style="text-align: right;">
    <button
      class="btn cursor-pointer"
      [ngClass]="{
        'btn-invalid': selectedCommercesID.length !== 1,
        blue: selectedCommercesID.length === 1
      }"
      (click)="openEditCommerceDialog()"
      [disabled]="selectedCommercesID.length !==1"
    >
      Editar
    </button>
    <button
      class="btn cursor-pointer"
      *ngIf="!allowed"
      (click)="openAllowCommerceDialog()"
      [ngClass]="{
        'btn-invalid': selectedCommercesID.length == 0,
        green: selectedCommercesID.length > 0
      }"
      [disabled]="selectedCommercesID.length == 0"
    >
      Cargar
    </button>
    <button
      class="btn cursor-pointer"
      (click)="openDeleteCommerceDialog()"
      [ngClass]="{
        'btn-invalid': selectedCommercesID.length == 0,
        red: selectedCommercesID.length > 0
      }"
      [disabled]="selectedCommercesID.length == 0"
    >
      Eliminar
    </button>
  </div>
  <div style="text-align: right;" *ngIf="selectedCommercesID.length === 0">
    <span class="help-block"
      >Debe seleccionar al menos un comercio para poder eliminar, editar o
      cargar</span
    >
  </div>
  <div style="text-align: right;" *ngIf="selectedCommercesID.length > 1">
    <span class="help-block"
      >Solo puede editar un comercio a la vez</span
    >
  </div>
  <div style="text-align: right;">
    <button class="blue btn cursor-pointer" (click)="openDialogDownloadExcel()">
      Descargar Excel
    </button>
  </div>
</div>
